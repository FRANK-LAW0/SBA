<!DOCTYPE html>
<html>

<head>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta charset="UTF-8">
  <title>Edit Event</title>
  <link rel="stylesheet" href="{{ url_for('static', filename='style.css') }}">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/all.min.css">
</head>

<body>
  {% include 'base_nav.html' %}

  <main class="container">
    <div class="form-card">
      <div class="form-header">
        <h1><i class="fas fa-edit"></i> Edit Event</h1>
        <p>Editing event {{ event.event_id }} â€” {{ event.event }}</p>
      </div>

      {% with messages = get_flashed_messages(with_categories=true) %}
      {% if messages %}
      <div class="flash-messages">
        {% for category, message in messages %}
        <div class="flash flash-{{ category }}">
          <i class="fas fa-{% if category == 'success' %}check-circle{% else %}exclamation-circle{% endif %}"></i>
          {{ message }}
        </div>
        {% endfor %}
      </div>
      {% endif %}
      {% endwith %}

      <form method="post" class="modern-form">
        <input type="hidden" name="event_id" value="{{ event.event_id }}">

        <div class="form-group">
          <label for="event_id"><i class="fas fa-id-badge"></i> Event ID</label>
          <input type="text" id="event_id" class="modern-input" value="{{ event.event_id }}" disabled>
        </div>

        <div class="form-group">
          <label for="event_name"><i class="fas fa-calendar-day"></i> Event Name</label>
          <input type="text" id="event_name" class="modern-input" value="{{ event.event }}" disabled>
        </div>

        <div class="form-group">
          <label for="sex"><i class="fas fa-venus-mars"></i> Gender</label>
          <input type="text" id="sex" class="modern-input" value="{{ event.sex }}" disabled>
        </div>

        <div class="form-group">
          <label for="grade"><i class="fas fa-school"></i> Grade</label>
          <input type="text" id="grade" class="modern-input" value="{{ event.grade }}" disabled>
        </div>

        <div class="form-group">
          <label for="status"><i class="fas fa-info-circle"></i> Status</label>
          <select id="status" name="status" class="modern-input" required>
            <option value="" {% if event.status is none or event.status == '' %}selected{% endif %}>-- Select status --</option>
            <option value="Completed" {% if event.status == 'Completed' %}selected{% endif %}>Completed</option>
            <option value="Not yet started" {% if event.status == 'Not yet started' %}selected{% endif %}>Not yet started</option>
          </select>
          <small class="input-hint">Change the event status. Note: setting to "Not yet started" may affect existing results.</small>
        </div>

        <div class="form-actions">
          <button type="submit" class="submit-btn">
            <i class="fas fa-save"></i> Save
          </button>
          <a href="{{ url_for('list_events') }}" class="cancel-btn">
            <i class="fas fa-times"></i> Cancel
          </a>
        </div>
      </form>
    </div>
  </main>
</body>

</html>
